# A7: Web Resources Documentation

Our project, answerly, is a web application for collaborative questions and answers.

The architecture of the web application to develop is documented indicating the catalogue of resources and the properties of each resource, including: references to the graphical interfaces, and the format of JSON responses. This page presents the documentation for _Answerly_, including the following operations over data: create, read, update, and delete.

## 1. Overview

An overview of the web application to implement is presented in this section, where the modules are identified and briefly described. The web resources associated with each module are detailed in the individual documentation of each module.

|                       |                            |
|-----------------------|----------------------------|
|M01: Authentication and Individual Profile          | Web resources associated with user authentication and indivifual profile management. Includes features: login/ logout and registration, view and edit personal profile information.|                                        
|M02: Questions, Answers and Comments             |Web resources associated with questions, answers and their comments. Includes features: add, view, upvote, downvote, follow and report questions, add, view, upvote, downvote and report answers, and add, view and report comments. Also deals with searches.|
|M03: Website Administration |Web resources associated with management of the website. Includes features: user promotion, demotion and banishment, posts management.|
|M04: Static Pages      |Web resources with static content are associated with this module: About page.|

## 2. Permissions

|                   |                   |                   |
|-------------------|-------------------|-------------------|
|PUB                |Guests             |People just visiting the site                                                    |
|USR                |Authenticated Users|Registered users with the ability of posting to the website.                      |
|MOD                |Moderatores        |Group of Authenticated Users with Website Management Previleges|
|ADM                |Administratores    |Highest level of Website Management|

## 3. Modules

This section documents each web resource of each module, indicating the URL, HTTP methods, the possible parameters (mandatory or optional), body request, interfaces with the user (referring to the A3 artefact), or JSON responses in the event of AJAX call to the API.

### 3.1 Module M01: Authentication and Individual Profile

Endpoints of Module Authentication and Individual Profile:

* R101: Login Form ```/login```
* R102: Login Action ```/login```
* R103: Logout Action ```/logout```
* R104: Register Form ```/register```
* R105: Register Action ```/register```
* R106: View Profile ```/user/{id}```
* R107: Edit Profile Form ```/user/{id}```
* R108: Edit Profile Action ```/user/{id}```

R101: Login Form

|             |             |
|-------------|-------------|    
|URL          |```/login``` |
|Description  | Page with form to login to a user account|
|Method       | GET |
|UI           | UI01|
|SUBMIT       | R102|
|Permissions  | PUB |

R102: Login Action

|                       |             |
|-----------------------|-------------|    
|URL                    |```/login``` |
|Description            | This web resource logs the user into the system. Redirects to the home page on success and the login form on failure.|
|Method                 | POST |
|Request Body           | +username:string (Username)|
|                       | +password:string (Password)|
|Redirects              | R201 (on SUCCESS)|
|                       | R101 (on ERROR)|
|Permissions            | PUB |

R103: Logout Action

|                       |             |
|-----------------------|-------------|    
|URL                    |```/logout``` |
|Description            | This web resource logs out the user from the system. Redirects to the login page.|
|Method                 | POST |
|Redirects              | R101 (on SUCCESS)|
|Permissions            | USR, MOD, ADM |

R104: Register Form

|                       |             |
|-----------------------|-------------|    
|URL                    |```/register``` |
|Description            | This web resource register a new user account.|
|Method                 | GET |
|UI                     | UI06 |
|SUBMIT                 | R105 |
|Permissions            | PUB |

R105: Register Action

|                       |             |
|-----------------------|-------------|    
|URL                    |```/register``` |
|Description            | This web resource inserts the user into the system. Redirects to the home page on success and the register form on failure.|
|Method                 | POST |
|Request Body           | first_name:string (First Name)|
|                       | last_name:string (Last Name)|
|                       | email:string (Email)|
|                       | birthday:date (Birthday)|
|                       | username:string (Username)|
|                       | password:string (Password)|
|                       | bio:string (Description)|
|Redirects              | R201 (on SUCCESS)|
|                       | R104 (on ERROR)|
|Permissions            | PUB |

R106: View Profile

|                       |             |
|-----------------------|-------------|    
|URL                    |```/user/{id}``` |
|Description            | Shows a user's profile page |
|Method                 | GET |
|Paramaters             | +id:integer (user's primary key)|
|UI                     | UI05 |
|Permissions            | PUB |

R107: Edit Profile Form

|                       |             |
|-----------------------|-------------|    
|URL                    |```/user/{id}``` |
|Description            | Page with a form to edit profile info.|
|Method                 | GET |
|Paramaters             | +id:integer (user's primary key)|
|UI                     | UI05 |
|SUBMIT                 | R108 |
|Permissions            | USR  |

R108: Edit Profile Action

|                       |             |
|-----------------------|-------------|    
|URL                    |```/user/{id}``` |
|Description            | This web resource changes user profile information based on the input received. Redirects to the user profile on success and edit profile page on failure.|
|Method                 | POST |
|Request Body           | first_name:string (First Name)|
|                       | last_name:string (Last Name)|
|                       | email:string (Email)|
|                       | bio:string (Description)|
|                       | username:string (Username)|
|                       | password:string (Password)|
|Redirects              | R106 (on SUCCESS)|
|                       | R107 (on ERROR)|
|Permissions            | USR |

### 3.2 Module M02: Questions, Answers and Comments

Endpoints of Module Questions, Answers and Comments:

* R201: Home ```/home```
* R202: Search Form ```/search```
* R203: Search Action ```/search```
* R204: View Question ```/question/{id}```
* R205: Add Question Form ```/question/add```
* R206: Add Question Action  ```/question/add```
* R207: Upvote Question ```/question/{id}```
* R208: Downvote Question ```/question/{id}```
* R209: Follow Question ```/question/{id}```
* R210: Report Question ```/question/{id}```
* R211: Add Answer Form ```/question/{id}```
* R212: Add Answer Action ```/question/{id}```
* R213: Upvote Answer ```/question/{id}```
* R214: Downvote Answer ```/question/{id}```
* R215: Report Answer ```/question/{id}```
* R216: Add Comment Form ```/question/{id}```
* R217: Add Comment Action ```/question/{id}```
* R218: Report Comment ```/question/{id}```

R201: Home

|                       |             |
|-----------------------|-------------|    
|URL                    |```/home``` |
|Description            | Shows the home page, with some relevant questions and popular labels |
|Method                 | GET |
|UI                     | UI02 |
|Permissions            | PUB |

R202: Search Form

|                       |             |
|-----------------------|-------------|    
|URL                    |```/search``` |
|Description            | Page with a form regarding the search for specific questions|
|Method                 | GET |
|Parameters             | ?content:string (Question content, title or label)|
|                       | ?answered:boolean (Answered)|
|                       | ?positive_score:boolean (Positive Score)|
|                       | ?start:date (Start)|
|                       | ?end:date (End)|
|UI                     | UI07 |
|AJAX Calls             | R203 |
|Permissions            | PUB  |

R203: Search Action

|                       |             |
|-----------------------|-------------|    
|URL                    |```/search``` |
|Description            | This web resource searches the system for questions and returns the results.|
|Method                 | GET |
|Parameters             | ?content:string (Question content, title or label)|
|                       | ?answered:boolean (Answered)|
|                       | ?positive_score:boolean (Positive Score)|
|                       | ?start:date (Start)|
|                       | ?end:date (End)|
|Response Body          | JSON203 |
|Permissions            | USR |

R204: View Question

|                       |             |
|-----------------------|-------------|    
|URL                    |```/question/{id}``` |
|Description            | Shows the the question page, inclu |
|Method                 | GET |
|Parameters             | +id:integer (question's primary key)|
|UI                     | UI03 |
|Permissions            | USR |

R205: Add Question Form

|                       |             |
|-----------------------|-------------|    
|URL                    |```/question/add``` |
|Description            | Page with a form to post a new question.|
|Method                 | GET |
|UI                     | UI08 |
|SUBMIT                 | R206 |
|Permissions            | USR  |

R206: Add Question Action

|                       |             |
|-----------------------|-------------|    
|URL                    |```/question/add``` |
|Description            | This web resource creates a new question based on the input received. Redirects to the new question page on success and back to the question form on failure.|
|Method                 | POST |
|Request Body           | title:string (Title)|
|                       | content:string (Content)|
|Redirects              | R204 (on SUCCESS)|
|                       | R205 (on ERROR)|
|Permissions            | USR |

R207: Upvote Question

|                       |             |
|-----------------------|-------------|    
|URL                    |```/question/{id}``` |
|Description            | Lets the user upvote a question and see how many people upvoted |
|Method                 | GET |
|UI                     | UI03 |
|Permissions            | USR |

R208: Downvote Question

|                       |             |
|-----------------------|-------------|    
|URL                    |```/question/{id}``` |
|Description            | Lets the user downvote a question and see how many people downvoted. |
|Method                 | GET |
|UI                     | UI03 |
|Permissions            | USR |

R209: Follow Question

|                       |             |
|-----------------------|-------------|    
|URL                    |```/question/{id}``` |
|Description            | Lets the user follow a question. |
|Method                 | GET |
|UI                     | UI03 |
|Permissions            | USR |

R210: Report Question

|                       |             |
|-----------------------|-------------|    
|URL                    |```/question/{id}``` |
|Description            | Lets the user report a question |
|Method                 | GET |
|UI                     | UI03 |
|Permissions            | USR |

R211: Add Answer Form

|                       |             |
|-----------------------|-------------|    
|URL                    |```/question/{id}``` |
|Description            | Section with a form to post a new answer.|
|Method                 | GET |
|UI                     | UI03 |
|SUBMIT                 | R212 |
|Permissions            | USR  |

R212: Add Answer Action

|                       |             |
|-----------------------|-------------|    
|URL                    |```/question/{id}``` |
|Description            | This web resource creates a new answer based on the input received. Redirects to the question page on success and back to the answer form on failure.|
|Method                 | POST |
|Request Body           | content:string (Content)|
|Redirects              | R204 (on SUCCESS)|
|                       | R211 (on ERROR)|
|Permissions            | USR |

R213: Upvote Answer

|                       |             |
|-----------------------|-------------|    
|URL                    |```/question/{id}``` |
|Description            | Lets the user upvote an answer and see how many people upvoted |
|Method                 | GET |
|UI                     | UI03 |
|Permissions            | USR |

R214: Downvote Answer

|                       |             |
|-----------------------|-------------|    
|URL                    |```/question/{id}``` |
|Description            | Lets the user downvote an answer and see how many people downvoted. |
|Method                 | GET |
|UI                     | UI03 |
|Permissions            | USR |

R215: Report Answer

|                       |             |
|-----------------------|-------------|    
|URL                    |```/question/{id}``` |
|Description            | Lets the user report an answer |
|Method                 | GET |
|UI                     | UI03 |
|Permissions            | USR |

R216: Add Comment Form

|                       |             |
|-----------------------|-------------|    
|URL                    |```/question/{id}``` |
|Description            | Section with a form to post a new comment.|
|Method                 | GET |
|UI                     | UI03 |
|SUBMIT                 | R217 |
|Permissions            | USR  |

R217: Add Comment Action

|                       |             |
|-----------------------|-------------|    
|URL                    |```/question/{id}``` |
|Description            | This web resource creates a new comment based on the input received. Redirects to the question page on success and back to the comment form on failure.|
|Method                 | POST |
|Request Body           | content:string (Content)|
|Redirects              | R204 (on SUCCESS)|
|                       | R216 (on ERROR)|
|Permissions            | USR |

R218: Report Comment

|                       |             |
|-----------------------|-------------|    
|URL                    |```/question/{id}``` |
|Description            | Lets the user report a comment. |
|Method                 | GET |
|UI                     | UI03 |
|Permissions            | USR |



### 3.3 Module M04: Website Administration

### 3.4 Module M05: Static Pages

## 4. JSON/XML Types

The structure of the JSON formatted answers must be documented as illustrated below.

## Revision history

1. First submission (13/04/2020).

------

GROUP2064, 13/04/2020

- Antonio Pedro Reis Ribeiro Sousa Dantas, up201703878@fe.up.pt
- [Editor] Eduardo João Santana Macedo, up201703658@fe.up.pt
- Nuno Miguel Teixeira Cardoso, up201706162@fe.up.pt
- Paulo Roberto Dias Mourato, up201705616@fe.up.pt









